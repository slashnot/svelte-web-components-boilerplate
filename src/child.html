<div>
	<h2>{$name}</h2>
	<button on:click="getPosts()">Get Posts</button>
	<ul>
		{#each $posts as post}
		<li>{post[id]}</li>
		{:else}
		<li>No posts :(</li>
		{/each}
	</ul>
  <slot></slot>

  <svelte:component this="{Content}" title="thing"/>
</div>


<script>
  import store from "./store";
  import Content from "./Content.html";

  export default {
    tag: "app-child",

    store: () => store,

    data() {
      return {
        id: "",
        elm: null
      };
    },

    oncreate() {
      console.log(this.children[1]);
      this.set({ id: this.children[0].getAttribute("resid") });
      this.set({ elm: this.children[1] });
      
      var temp = this.children[1]
      var clon = temp.content.cloneNode(true);
      console.log(clon.querySelector('h2'))
      var tmpl = clon.querySelector('h2').innerText = "Hello"
      document.body.appendChild(clon);
    },

    onupdate(){
    },

    methods: {
      getPosts() {
        fetch("https://jsonplaceholder.typicode.com/posts")
          .then(res => res.json())
          .then(posts => {
            console.log(posts);
            this.store.set({ posts });
          });
      }
    }
  };
</script>